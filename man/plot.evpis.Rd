% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plot.evpis.R
\name{plot.evpis}
\alias{plot.evpis}
\title{Plot Expected Value of Perfect Information (EVPI)}
\usage{
\method{plot}{evpis}(
  data,
  color_by = NULL,
  shape_by = NULL,
  facet_by = NULL,
  mode = "Overall",
  filter_expr = NULL,
  facet_scales = "fixed",
  lambda_max = NULL,
  lambda_steps = 100,
  palette = "Dark2",
  shapes_palette = NULL,
  return_data = FALSE,
  ...
)
}
\arguments{
\item{data}{Either the output of \code{\link{compute_icers}} or a tibble
produced by \code{\link{combine_icers_results}} containing bootstrap
replicates.}

\item{color_by}{Character string specifying the variable used for colour
mapping. Use \code{"none"} to disable colour mapping. Defaults to
\code{"comparison"}.}

\item{shape_by}{Character string specifying the variable used for point
shape mapping. Use \code{"none"} to disable shape mapping. Defaults to
\code{"dataset"}.}

\item{facet_by}{Character string defining the faceting directive. Supported
values include \code{"dataset"}, \code{"comparison"},
\code{"subgroup_var"}, \code{"subgroup_level"}, or \code{"subgroup"} to
construct a grid of subgroup-variable by subgroup-level. Use
\code{"none"} to disable faceting.}

\item{mode}{Character string specifying whether to display results for the
overall population (\code{"Overall"}) or subgroup-specific analyses
(\code{"Subgroups"}).}

\item{filter_expr}{Optional tidyverse-style filtering expression applied to
the underlying bootstrap replicates prior to plotting.}

\item{facet_scales}{Character string specifying whether facet scales are
fixed or free (passed to \code{ggplot2}).}

\item{lambda_max}{Optional numeric value specifying the maximum
willingness-to-pay threshold displayed on the x-axis. If \code{NULL},
a heuristic based on the distribution of incremental cost-effectiveness
ratios is used to provide a robust default.}

\item{lambda_steps}{Integer specifying the number of WTP evaluation points
used to compute EVPI values.}

\item{palette}{Colour palette name or vector passed to
\code{\link{ce_plot_base}}.}

\item{shapes_palette}{Optional object of class \code{"cea_shapes"} defining
custom shape values for point layers.}

\item{return_data}{Logical; if \code{TRUE}, returns a tidy data frame
containing EVPI values instead of a \code{ggplot} object.}

\item{...}{Additional graphical parameters passed to point layers
(e.g. \code{alpha}, \code{size}).}
}
\value{
A \code{ggplot} object representing the EVPI curve, or a tidy data frame
containing EVPI values when \code{return_data = TRUE}.
}
\description{
Produces Expected Value of Perfect Information (EVPI) curves across a range
of willingness-to-pay (WTP) thresholds using bootstrap replicates generated
by \code{\link{compute_icers}}. The EVPI quantifies the expected gain from
eliminating decision uncertainty, and represents the difference between
the expected net benefit under perfect information and the expected net
benefit under current uncertainty.
}
\details{
EVPI curves provide a value-of-information perspective on decision-making
and are commonly used to assess the potential benefit of additional
research. The function supports multi-strategy and multi-dataset analyses,
explicit subgroup stratification, and full user control over aesthetic
mappings.

This function relies on the internal plotting engine
\code{\link{ce_plot_base}} to ensure consistent aesthetics and behaviour
across all CEAgroupR visualizations. It is typically used alongside
\code{\link{plot.icers}} and \code{\link{plot.ceacs}} to provide a
complementary value-of-information perspective on uncertainty in
cost-effectiveness analyses.
}
\examples{
## Example 1: EVPI curve for a single dataset
res <- compute_icers(
  data      = cua_base,
  group     = "group",
  cost      = "cost_total",
  effect    = "effect",
  ref_group = "g0",
  R         = 50,
  seed      = 123
)

plot.evpis(res)

## Example 2: EVPI with subgroup stratification
plot.evpis(
  res,
  mode     = "Subgroups",
  facet_by = "subgroup"
)
}
