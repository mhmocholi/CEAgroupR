% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plot.marginals.R
\name{plot.marginals}
\alias{plot.marginals}
\title{Plot Marginal Distributions of Incremental Outcomes}
\usage{
\method{plot}{marginals}(
  data,
  variable = "cost",
  geom_type = "histogram",
  color_by = NULL,
  shape_by = NULL,
  facet_by = NULL,
  mode = "Overall",
  filter_expr = NULL,
  facet_scales = "fixed",
  palette = "Dark2",
  shapes_palette = NULL,
  bins = 30,
  ...
)
}
\arguments{
\item{data}{Either the output of \code{\link{compute_icers}} or a tibble
produced by \code{\link{combine_icers_results}} containing bootstrap
replicates.}

\item{variable}{Character string specifying which marginal distribution
to display. Must be either \code{"cost"} (for \code{Delta_Cost}) or
\code{"effect"} (for \code{Delta_Effect}).}

\item{geom_type}{Character string specifying the geometry used to display
the distribution. Supported values are \code{"histogram"},
\code{"density"}, and \code{"boxplot"}.}

\item{color_by}{Character string specifying the variable used for colour
mapping. Use \code{"none"} to disable colour mapping. Defaults to
\code{"comparison"}.}

\item{shape_by}{Character string specifying the variable used for point
shape mapping. Use \code{"none"} to disable shape mapping. Defaults to
\code{"dataset"}.}

\item{facet_by}{Character string defining the faceting directive. Supported
values include \code{"dataset"}, \code{"comparison"},
\code{"subgroup_var"}, \code{"subgroup_level"}, or \code{"subgroup"} to
construct a grid of subgroup-variable by subgroup-level. Use
\code{"none"} to disable faceting.}

\item{mode}{Character string specifying whether to display results for the
overall population (\code{"Overall"}) or subgroup-specific analyses
(\code{"Subgroups"}).}

\item{filter_expr}{Optional tidyverse-style filtering expression applied to
the underlying bootstrap replicates prior to plotting.}

\item{facet_scales}{Character string specifying whether facet scales are
fixed or free (passed to \code{ggplot2}).}

\item{palette}{Colour palette name or vector passed to
\code{\link{ce_plot_base}}.}

\item{shapes_palette}{Optional object of class \code{"cea_shapes"} defining
custom linetype values for grouped marginal distributions.}

\item{bins}{Integer specifying the number of bins used for the histogram
geometry.}

\item{...}{Additional graphical parameters passed to point layers
(e.g. \code{alpha}, \code{size}).}
}
\value{
A \code{ggplot} object representing the marginal distribution of the
selected incremental outcome.
}
\description{
Visualizes marginal distributions of incremental cost
(\code{Delta_Cost}) or incremental effectiveness
(\code{Delta_Effect}) using bootstrap replicates generated by
\code{\link{compute_icers}}. Marginal distributions provide a univariate
view of uncertainty, complementing joint representations such as the
incremental cost-effectiveness plane.
}
\details{
The function supports multiple geometries, including histograms, kernel
density estimates and boxplots. It is designed to facilitate inspection of
the distributional shape, spread and asymmetry of incremental outcomes
across strategies, datasets and subgroups.

The function adheres to the unified graphical conventions of CEAgroupR,
ensuring consistent colour mapping, palette handling, faceting behaviour
and legend logic across all visualization functions.

Marginal distributions are useful for exploring the uncertainty of costs
or effects independently, identifying skewness, multimodality or extreme
values that may not be immediately apparent in joint plots. This function
is typically used alongside \code{\link{plot.icers}} to provide complementary
perspectives on uncertainty.
}
\examples{
## Example 1: Marginal distribution of incremental costs
res <- compute_icers(
  data      = cua_base,
  group     = "group",
  cost      = "cost_total",
  effect    = "effect",
  ref_group = "g0",
  R         = 50,
  seed      = 123
)

plot.marginals(
  res,
  variable  = "cost",
  geom_type = "density"
)

## Example 2: Marginal effects by dataset with custom linetypes
plot.marginals(
  res,
  variable        = "effect",
  geom_type       = "density",
  shape_by        = "dataset",
  shapes_palette  = custom_shapes(
    linetypes = c("dashed", "dotted")
  )
)

}
